<html>
<head>
  <link rel="stylesheet" href="tinycolpick.css" type="text/css" media="screen"/>

  <!-- build:js tinycolorpicker.js -->
  <script type="text/javascript" src="tinycolpick.js"></script>
  <!-- /build -->
  <script type="text/javascript">
    var picker;
    
    function getstat() {
      var xh = new XMLHttpRequest();
      xh.open("GET", window.location.pathname + '/act?askstat=1', true); 
      xh.send(null);
      xh.onreadystatechange = function() {
        if (xh.readyState==4 && xh.status==200) {
          var s=xh.responseText.split(',');
          picker.setColor(s[2]);
        }
      }
    }
    
    window.onload = function() {
      var $picker = document.getElementById("colorPicker");
      picker = tinycolorpicker($picker);
      getstat();
    }
    
    function setcol() {
      var xh = new XMLHttpRequest();
      xh.open("GET", window.location.pathname + '/act?col=' + picker.colorHex.substring(1), true); 
      xh.send(null);
    }
  </script>
</head>
<body>
  <h1><a href="/">wisleep</a></h1>
  <form action="setcol" method="post">
  <div id="colorPicker" onmouseup="setcol();">
    <a class="color"><div class="colorInner"></div></a>
    <div class="track"></div>
    <ul class="dropdown"><li></li></ul>
    <input type="hidden" class="colorInput"/>
  </div>
  </form>
  <div align="middle">
  <button onclick="setcol()">Set Color</button>
  </div>
</body>
</html>
